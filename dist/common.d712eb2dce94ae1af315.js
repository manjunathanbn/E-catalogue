(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"t+9Q":function(t,e,a){"use strict";a.d(e,"a",(function(){return m}));var i=a("Kdsb"),o=a("uh2U"),n=a("fXoL"),s=a("tyNb"),r=a("2uiY"),c=a("0IaG"),h=a("fvNU"),l=a("rxmM"),d=a("Kmm4"),p=a("wZkO"),g=a("ofXK");function b(t,e){if(1&t){var a=n.Vb();n.Ub(0,"mat-tab",5),n.Ub(1,"div",6),n.Ub(2,"canvas",7),n.bc("click",(function(t){n.xc(a);var i=e.$implicit;return n.fc().getMopedDetail(t,i.id)})),n.Tb(),n.Tb(),n.Tb()}if(2&t){var i=e.$implicit,o=n.fc();n.nc("label",i.name),n.Cb(1),n.mc("perfectScrollbar",o.config),n.Cb(1),n.Dc("background","url("+i.image+")"),n.nc("title",o.imgTool)}}var m=function(){function t(t,e,a,i,o,n){this.router=t,this.sidenaveService=e,this.dialog=a,this.commonservice=i,this.masterdata=o,this.toaster=n,this.config={},this.imgTool="",this.assemlyData=[],this.setTab=0}return t.prototype.onMouseMove=function(t){console.log("x: "+t.clientX+", y: "+t.clientY);var e=0,a=0;e+=t.offsetX,a+=t.offsetY,this.canvas=document.getElementById("canvas");var i=t.offsetX,o=t.offsetY,n=[];console.log("123",this.assemblePart),this.assemblePart.length>0&&(n=this.getmatchDatafun(i,o,this.assemblePart),console.log("data",n)),n.length&&(this.imgTool=n[0].ASSEMBLY_NAME),console.log(e,a)},t.prototype.ngOnInit=function(){this.setTab=this.commonservice.selectTab,this.bckdata=this.commonservice.paramgrp,this.commonservice.selectTab=0,this.commonservice.paramgrp=null,console.log("tabdata",this.tabData),this.setTab>0?this.getMopedDetail(0,this.tabData.head[this.setTab].id):this.tabData.head.length>0&&this.getMopedDetail(0,this.tabData.head[0].id),this.bckdata&&1==this.bckdata.IS_SUBASSEMBLY_ID&&(this.openPopup(this.bckdata),this.bckdata=null),document.getElementById("myBtn").style.height="50px",this.imgresize()},t.prototype.ngAfterViewInit=function(){},t.prototype.imgresize=function(){var t=document.getElementById("canvas"),e=t.getContext("2d"),a=new Image;a.onload=function(){t.height=t.width*(a.height/a.width);var i=document.createElement("canvas"),o=i.getContext("2d");i.width=.5*a.width,i.height=.5*a.height,o.drawImage(a,0,0,i.width,i.height),o.drawImage(i,0,0,.5*i.width,.5*i.height),e.drawImage(i,0,0,.5*i.width,.5*i.height,0,0,t.width,t.height)},console.log("imgpath",this.tabData[0].image),a.src=this.tabData[0].image},t.prototype.openPopup=function(t){var e=this;this.dialog.open(o.a,{data:{title:"part",data:t}}).afterClosed().subscribe((function(t){console.log("The dialog was closed",t),t&&e.router.navigate([e.tabData.url],{queryParams:{param1:t.SERIES,param2:t.ASSEMBLY_ID}})}))},t.prototype.getPosition=function(t,e){this.element=this.root,this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d");var a=this.ctx.canvas.getBoundingClientRect(),i=0,o=0;i+=Math.floor(t.clientX-a.left),o+=Math.floor(t.clientY-a.top),console.log("FFFFFFf",i,o),this.getmatchData(i,o),this.coordMatch.length>0&&(this.commonservice.selectTab=this.setTab,this.commonservice.paramgrp=this.coordMatch[0],console.log("url",this.tabData.url),console.log("asembly",this.coordMatch[0].ASSEMBLY_ID),this.coordMatch[0].IS_SUBASSEMBLY_ID?this.openPopup(this.coordMatch[0]):this.router.navigate([this.tabData.url],{queryParams:{param1:this.coordMatch[0].SERIES,param2:this.coordMatch[0].ASSEMBLY_ID}}))},t.prototype.getmatchData=function(t,e){for(var a=t+5,i=e+5,o=e-5,n=[],s=t-5;s<a;s++){for(var r=o;r<i;r++){var c={x:s,y:r};if(this.coordMatch=this.filterItemsOfType(s,r),n.push(c),this.coordMatch.length>0)return!0}if(this.coordMatch.length>0)return!0}},t.prototype.getMopedDetail=function(t,e){var a=this;this.masterdata.getReq("","api/Catalouge/GetVehCoordinatesbySeries?series="+e).subscribe((function(i){i&&200==i.statusCode&&(a.assemlyData=i.data,a.assemblePart=i.data.coordinates,console.log("321",a.assemblePart),0!=t&&a.getPosition(t,e))}),(function(t){a.toaster.errorToastr(t.statusMessage)}))},t.prototype.filterItemsOfType=function(t,e){return[t,e].join(),this.assemlyData.coordinates.filter((function(a){return a.COORDINATES==[t,e,a.COORDINATES.split(",")[2]].join()}))},t.prototype.tabChanges=function(t){this.tabData.head.length>0&&this.getMopedDetail(t,this.tabData.head[t.index].id)},t.prototype.getmatchDatafun=function(t,e,a){var i=[],o=t+5,n=t-5,s=e+5,r=e-5;console.log("hi am in");for(var c=n;c<o;c++){for(var h=r;h<s;h++)if((i=a.filter((function(t){return t.COORDINATES==[c,h,t.COORDINATES.split(",")[2]].join()}))).length>0)return i;if(i.length>0)return i}},t.\u0275fac=function(e){return new(e||t)(n.Ob(s.f),n.Ob(r.a),n.Ob(c.b),n.Ob(h.a),n.Ob(l.a),n.Ob(d.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-catalogue"]],viewQuery:function(t,e){var a;1&t&&n.Nc(i.b,!0),2&t&&n.tc(a=n.cc())&&(e.directiveScroll=a.first)},hostBindings:function(t,e){1&t&&n.bc("mousemove",(function(t){return e.onMouseMove(t)}))},inputs:{tabData:"tabData"},decls:5,vars:2,consts:[[1,"tooltip"],["tooltip",""],[1,"homeMain"],["mat-align-tabs","start",3,"selectedIndex","selectedIndexChange","Change"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["fullpage","",3,"perfectScrollbar"],["id","canvas","width","750","height","506",2,"width","auto","height","100%","margin-top","5px","opacity","1",3,"title","click"]],template:function(t,e){1&t&&(n.Pb(0,"div",0,1),n.Ub(2,"div",2),n.Ub(3,"mat-tab-group",3),n.bc("selectedIndexChange",(function(t){return e.setTab=t}))("Change",(function(t){return e.tabChanges(t)})),n.Gc(4,b,3,5,"mat-tab",4),n.Tb(),n.Tb()),2&t&&(n.Cb(3),n.mc("selectedIndex",e.setTab),n.Cb(1),n.mc("ngForOf",e.tabData.head))},directives:[p.b,g.m,p.a,i.b],styles:["mat-tab-label{height:10vh;padding:0 7px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:180px;min-width:12vw;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative;font-size:4.8px}#canvas[_ngcontent-%COMP%]{cursor:pointer;background-repeat:no-repeat!important}#canvas[_ngcontent-%COMP%]:-webkit-any-link{cursor:pointer}.tooltip[_ngcontent-%COMP%]{display:none;position:absolute;font-size:.75em;background-color:#fff;border:1px solid grey;border-radius:2px}@media screen and (min-width:1900px) and (max-height:1080px){.canvas[_ngcontent-%COMP%]{width:750px!important;height:500px!important}}@media (max-width:768px){.mBack[_ngcontent-%COMP%]{background-size:295px!important}}.srlDiv[_ngcontent-%COMP%]{height:calc(100% - 100px);position:absolute;background-repeat:no-repeat!important}[class*=col-][_ngcontent-%COMP%]{width:100%}.mat-tab-labels[_ngcontent-%COMP%],   .mat-tab-label{color:#fff!important;height:40px!important}  .mat-tab-list{border-radius:10px}  .mat-tab-header{border-radius:10px;background-color:#00599d!important;height:40px!important}"]}),t}()}}]);